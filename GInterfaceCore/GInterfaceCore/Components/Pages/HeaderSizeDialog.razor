@page "/headersizedialog"
@inject DialogService DialogService

@code {
    [Parameter] public string FileName { get; set; }
    public string HeaderSize { get; set; }
    public string StartRow { get; set; }
    public string EndRow { get; set; }
    public bool IsAdditionalFieldChecked { get; set; }
    public string AdditionalFieldText { get; set; }
    public int SelectedOption { get; set; } // Almacena el valor numérico seleccionado
    private Core.AppCore _appCore = Core.AppCore.Instance;

    // Convertir el enum a una lista de SelectItems (sin drag and drop)
    public List<EnumValue> DocumentTypeItems => Enum.GetValues(typeof(DocumentType))
        .Cast<DocumentType>()
        .Select(dt => new EnumValue
        {
            Name = dt.ToString(),
            Value = (int)dt
        }).ToList();

    private void Confirm()
    {
        DialogService.Close(new { HeaderSize, StartRow, EndRow, AdditionalFieldText, SelectedOption });
    }

    private void Cancel()
    {
        DialogService.Close(null);
    }

    public class EnumValue
    {
        public string Name { get; set; }
        public int Value { get; set; }
    }
}

<div>
    <h3>Configurar Encabezado y Rango de Datos</h3>
    <p>El archivo <strong>@FileName</strong> requiere que especifiques el tamaño del encabezado y el rango de datos.</p>

    <div style="margin-bottom: 20px;">
        <RadzenNumeric @bind-Value="HeaderSize" Placeholder="Tamaño del encabezado" Min="1" Max="100" Style="width:100%;" />
    </div>

    <div style="margin-bottom: 20px;">
        <RadzenTextBox @bind-Value="StartRow" Placeholder="Fila de Inicio" Style="width:100%;" />
    </div>

    <div style="margin-bottom: 20px;">
        <RadzenTextBox @bind-Value="EndRow" Placeholder="Fila Final" Style="width:100%;" />
    </div>

    <div style="margin-bottom: 20px;">
        <RadzenDropDown @bind-Value="SelectedOption" Data="@DocumentTypeItems" TextProperty="Name" ValueProperty="Value" Placeholder="Seleccione una opción" Style="width:100%;" />
    </div>

    <div style="margin-bottom: 20px;">
        <RadzenCheckBox @bind-Value="IsAdditionalFieldChecked" />
        <label style="margin-left: 10px;">¿Agregar campo adicional?</label>
    </div>

    @if (IsAdditionalFieldChecked)
    {
        <div style="margin-bottom: 20px;">
            <RadzenTextBox @bind-Value="AdditionalFieldText" Placeholder="Texto adicional" Style="width:100%;" />
        </div>
    }

    <div style="margin-top:20px;">
        <RadzenButton Text="Confirmar" Click="Confirm" ButtonStyle="ButtonStyle.Primary" />
        <RadzenButton Text="Cancelar" Click="Cancel" ButtonStyle="ButtonStyle.Secondary" />
    </div>
</div>
